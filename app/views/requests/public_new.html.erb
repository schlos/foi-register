<div class="page-header">
 <h1>New request</h1>
</div>

<%= form_for(@request, :class => "well") do |f| %>
  <% if @request.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@request.errors.count, "error") %> prohibited this request from being saved:</h2>

      <ul>
      <% @request.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <%# The requestor field should autocomplete using the database of
       registered requestors, and also seamlessly allow type-in of a
       new requestor name. In the latter case, the next screen will
       allow the requestor details to be filled in. When the form is
       submitted, the POSTed data will contain precisely one of
       requestor_id and requestor_name %>

  <fieldset>
    <%= f.fields_for(:requestor) do |s| %>
      <div class="field">
        <%= s.label :name, "Your name" %>
        <%= s.text_field :name, :size => 60 %>
      </div>
      <div class="field">
        <%= s.label :email, "Your email address" %>
        <%= s.text_field :email, :size => 60 %>
      </div>
    <% end %>
  </fieldset>

  <div class="field">
    <%= f.label :title, "Subject of request" %>
    <%= f.text_field :title, :size => 120 %>
  </div>
  
  <%# The body of the request %>
  <div class="field">
    <%= f.label :body, "Describe the information you want released" %>
    <%= f.text_area :body, :cols => 80 %>
  </div>

  <%# Flags %>
  <div>
    <%= f.label :is_requestor_name_visible, :class => "checkbox" do
      f.check_box(:is_requestor_name_visible) + "Publish my name"
    end %>
  </div>

  <div class="actions">
    <%= f.submit :class => "btn" %>
  </div>
<% end %>

<%= link_to 'Back', requests_path %>
